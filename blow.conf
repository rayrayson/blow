account-id = 885800555707
access-key = AKIAIF3TUNLSJYG5UWQQ
region-id = us-east-1
zone-id = us-east-1b
instance-type = t1.micro
user-name = ptommaso
image-id = ami-e565ba8c		 // Amazon Linux AMI 2012.03 (x86_64)

5nodes-cluster {
    zone-id = us-east-1d
    size = 2
    plugin = [
        hosts

        { nfs {
           path: /soft
           device: /dev/sdh1
           snapshot-id: snap-8fc1c1f3
           delete-on-termination: true
        }}

        { nfs = {
			volume-id: vol-8814f7e4
			device: /dev/sdg1
			path: /data
		}}

        { sge { root: /soft/x64/sge6, installation-mode: config } }

        { append {
            file: "piper.profile"
            to: "~/.bash_profile"
        }}
     ]
}


basic {

    size = 2 // size of cluster i.e. number of instances

	plugin = [ 
		hosts

		{ nfs = {
			path: /scratch
			device: /dev/sdh1
		}}

		{ nfs = { 
			snapshot-id: snap-b220e6cf
			device: /dev/sdh2
			path: /soft
			delete-on-termination: true
		}}

		{ sge = { root: /soft/x64/sge6, installation-mode: config } }

        { append {
            text: "export SOFT_HOME=/soft"
            file: "labtools.profile"
            to: "~/.bash_profile"
        }}
	]
}

script-test {

	image-id = ami-e565ba8c		 // Amazon Linux AMI 2012.03 (x86_64)
	size = 2 // size of cluster i.e. number of instances

    plugin = [

        { run-script { text: "echo 'run all' > ~/script1 "  } }
        { run-script { text: "echo 'run master' > ~/script2 ", role:"master"  } }
        { run-script { text: "echo 'run worker' > ~/script3 ", role:"worker"  } }
        { run-script { file: "./test-script.sh"  } }

    ]

}

